import{r as o,j as s}from"./framer-motion-DexFYn3r.js";import{B as f}from"./zxing-Bjhl56bl.js";const v=({onDetected:i})=>{const d=o.useRef(null),[l,n]=o.useState(null);return o.useEffect(()=>{const r=new f;let c=!0;return(async()=>{try{const e=await r.listVideoInputDevices();if(!e.length){n("No se encontraron c치maras disponibles");return}const m=e[0].deviceId;await r.decodeFromVideoDevice(m,d.current,(a,t)=>{var u;c&&(a!=null&&a.getText()&&(i(a.getText()),r.reset()),t&&!((u=t==null?void 0:t.message)!=null&&u.includes("NotFoundException"))&&n("Error al escanear: "+t.message))})}catch(e){if(!c)return;n("Error al iniciar el esc치ner: "+(e instanceof Error?e.message:"Error desconocido"))}})(),()=>{c=!1,r.reset()}},[i]),s.jsxs("div",{className:"relative",children:[s.jsx("video",{ref:d,className:"w-full aspect-[4/3] rounded-lg bg-black"}),l&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg",children:s.jsx("p",{className:"text-white text-center p-4",children:l})}),s.jsx("div",{className:"mt-2 text-sm text-muted-foreground text-center",children:"Apunta la c치mara al c칩digo de barras"})]})};export{v as default};
