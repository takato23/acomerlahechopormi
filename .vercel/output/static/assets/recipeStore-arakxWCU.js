import{c as p,b as c}from"./index-o6bm3qdW.js";import{d,u as f,b as u}from"./recipeService-wNgNlfn2.js";import{c as v}from"./react-eoYhWYcX.js";/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=p("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),h={recipes:[],isLoading:!1,error:null,showOnlyFavorites:!1},w=v((o,s)=>({...h,fetchRecipes:async e=>{o({isLoading:!0,error:null});try{const r=await u(e),a=s().showOnlyFavorites?r.filter(i=>i.is_favorite):r;o({recipes:a,isLoading:!1})}catch(r){console.error("Error fetching recipes:",r);const a=r instanceof Error?r.message:"Ocurri칩 un error desconocido al cargar las recetas.";o({error:a,isLoading:!1})}},addRecipe:e=>{o(r=>({recipes:s().showOnlyFavorites?[...r.recipes,e].filter(a=>a.is_favorite):[...r.recipes,e]}))},updateRecipeState:(e,r)=>{o(a=>({recipes:a.recipes.map(i=>i.id===e?{...i,...r}:i)}))},removeRecipe:e=>{o(r=>({recipes:r.recipes.filter(a=>a.id!==e)}))},toggleFavoriteFilter:()=>{o(e=>({showOnlyFavorites:!e.showOnlyFavorites}))},toggleFavorite:async e=>{const r=s().recipes.find(t=>t.id===e);if(!r){console.error(`Recipe with ID ${e} not found in store.`),c.error("No se encontr칩 la receta para actualizar.");return}const a=!r.is_favorite,i=r.is_favorite;o(t=>({recipes:t.recipes.map(n=>n.id===e?{...n,is_favorite:a}:n)}));try{if(!await f(e,a))throw new Error("Update failed or returned no data");c.success(a?"Receta a침adida a favoritos":"Receta quitada de favoritos")}catch(t){console.error("Error toggling favorite status:",t),o(n=>({recipes:n.recipes.map(l=>l.id===e?{...l,is_favorite:i}:l).filter(l=>s().showOnlyFavorites?l.is_favorite:!0)})),c.error("Error al actualizar favoritos.")}},deleteRecipe:async e=>{const r=s().recipes.find(i=>i.id===e);if(!r){console.error(`Recipe with ID ${e} not found in store for deletion.`),c.error("No se encontr칩 la receta para eliminar.");return}const a=s().recipes;o(i=>({recipes:i.recipes.filter(t=>t.id!==e)}));try{await d(e),c.success(`Receta "${r.title}" eliminada.`)}catch(i){console.error("Error deleting recipe:",i),o({recipes:a}),c.error(`Error al eliminar la receta "${r.title}".`)}}}));export{m as U,w as u};
