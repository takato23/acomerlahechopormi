import{r as c,j as e}from"./framer-motion-DexFYn3r.js";import{c as d,q as _,p as E,S as u,B as j,L as I}from"./index-o6bm3qdW.js";import{B as R}from"./badge-BYsIcOJf.js";import{A as f,a as g,b as N}from"./alert-BZO_YP9D.js";import{g as S,d as q}from"./recipeService-wNgNlfn2.js";import{u as C,U as L}from"./recipeStore-arakxWCU.js";import{C as o}from"./clock-BTl63eEv.js";import{T as A}from"./trash-2-CpjvPaTx.js";import"./react-eoYhWYcX.js";/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=d("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=d("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=d("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),G=()=>{var h;const{recipeId:r}=_(),y=E(),b=C(t=>t.removeRecipe),[s,w]=c.useState(null),[n,i]=c.useState(!0),[x,l]=c.useState(null);c.useEffect(()=>{(async()=>{if(!r){l("No se proporcionó un ID de receta."),i(!1);return}i(!0),l(null);try{const a=await S(r);a?w(a):l("Receta no encontrada.")}catch(a){console.error("Error fetching recipe:",a),l("Error al cargar la receta. Inténtalo de nuevo más tarde.")}finally{i(!1)}})()},[r]);const k=async()=>{if(!(!r||!s)&&window.confirm(`¿Estás seguro de que quieres eliminar la receta "${s.title}"?`)){i(!0);try{await q(r),b(r),y("/app/recipes")}catch(t){console.error("Error deleting recipe:",t),l("Error al eliminar la receta."),i(!1)}}};if(n&&!s)return e.jsx("div",{className:"flex justify-center items-center min-h-[calc(100vh-200px)]",children:e.jsx(u,{size:"lg"})});if(x)return e.jsx("div",{className:"container mx-auto p-4 md:p-6 lg:p-8",children:e.jsxs(f,{variant:"destructive",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx(g,{children:"Error"}),e.jsx(N,{children:x})]})});if(!s)return e.jsx("div",{className:"container mx-auto p-4 md:p-6 lg:p-8",children:e.jsxs(f,{children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx(g,{children:"Información"}),e.jsx(N,{children:"No se encontró la receta solicitada."})]})});const m=(h=s.instructions)==null?void 0:h.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).map((t,a)=>e.jsx("li",{className:"mb-2 leading-relaxed",children:t},a)),p=(s.prep_time_minutes??0)+(s.cook_time_minutes??0);return e.jsx("div",{className:"bg-slate-50 min-h-screen",children:e.jsxs("div",{className:"container mx-auto max-w-4xl p-4 md:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-8",children:s.image_url?e.jsx("img",{src:s.image_url??void 0,alt:s.title,className:"w-full h-auto max-h-[450px] object-cover rounded-lg shadow-md",loading:"lazy"}):e.jsx("div",{className:"w-full h-64 bg-slate-200 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(P,{className:"h-16 w-16 text-slate-400"})})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-3",children:s.title}),s.description&&e.jsx("p",{className:"text-lg text-slate-600 mb-6",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-slate-600 mb-6",children:[p>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(o,{className:"h-5 w-5"}),e.jsxs("span",{children:["Total: ",p," min"]})]}),s.prep_time_minutes!=null&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(o,{className:"h-5 w-5 text-emerald-600"})," ",e.jsxs("span",{children:["Prep: ",s.prep_time_minutes," min"]})]}),s.cook_time_minutes!=null&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(o,{className:"h-5 w-5 text-orange-600"})," ",e.jsxs("span",{children:["Cocción: ",s.cook_time_minutes," min"]})]}),s.servings!=null&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(L,{className:"h-5 w-5"}),e.jsxs("span",{children:["Porciones: ",s.servings]})]})]}),e.jsxs("div",{className:"flex gap-3 mb-8",children:[e.jsx(j,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(I,{to:`/app/recipes/${r}/edit`,children:[e.jsx(T,{className:"mr-2 h-4 w-4"})," Editar"]})}),e.jsxs(j,{variant:"destructive",size:"sm",onClick:k,disabled:n,children:[n?e.jsx(u,{size:"sm",className:"mr-2"}):e.jsx(A,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]}),s.ingredients&&s.ingredients.length>0&&e.jsxs("section",{className:"border-t border-slate-200 mt-8 pt-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-800 mb-4",children:"Ingredientes"}),e.jsx("ul",{className:"list-disc list-inside space-y-2 text-slate-700 pl-2",children:s.ingredients.map((t,a)=>e.jsxs("li",{children:[t.quantity&&e.jsx("span",{className:"font-medium",children:t.quantity}),t.unit&&e.jsx("span",{className:"ml-1",children:t.unit}),e.jsx("span",{className:"ml-2",children:t.ingredient_name})]},a))})]}),m&&m.length>0&&e.jsxs("section",{className:"border-t border-slate-200 mt-8 pt-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-800 mb-4",children:"Instrucciones"}),e.jsx("ol",{className:"list-decimal list-inside space-y-4 text-slate-700 pl-2",children:m})]}),s.tags&&s.tags.length>0&&e.jsxs("section",{className:"border-t border-slate-200 mt-8 pt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((t,a)=>e.jsx(R,{variant:"secondary",className:"font-normal",children:t},a))})]})]})})};export{G as default};
