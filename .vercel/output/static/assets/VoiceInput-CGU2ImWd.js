import{r as o,a as m,j as d}from"./framer-motion-DexFYn3r.js";import{c as h,B as k,n as S}from"./index-o6bm3qdW.js";/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=h("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.320.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=h("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),v=()=>{const[s,i]=o.useState(!1),[u,e]=o.useState(""),[a,c]=o.useState(null),t=o.useRef(null),l=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:void 0,f=!!l;o.useEffect(()=>{if(!f){c("Speech recognition no es soportado por este navegador.");return}t.current=new l;const r=t.current;return r.continuous=!1,r.interimResults=!1,r.lang="es-AR",r.onresult=n=>{let g="";for(let p=n.resultIndex;p<n.results.length;++p)n.results[p].isFinal&&(g+=n.results[p][0].transcript);console.log("Speech result:",g),e(g.trim())},r.onerror=n=>{console.error("Speech recognition error:",n.error,n.message),c(`Error de reconocimiento: ${n.error}`),i(!1)},r.onend=()=>{console.log("Speech recognition ended."),i(!1)},r.onstart=()=>{console.log("Speech recognition started."),i(!0),c(null),e("")},()=>{t.current&&t.current.abort()}},[f,l]);const x=o.useCallback(()=>{if(t.current&&!s)try{t.current.start()}catch(r){console.error("Error starting speech recognition:",r),c("No se pudo iniciar el reconocimiento."),i(!1)}},[s]),y=o.useCallback(()=>{t.current&&s&&t.current.stop()},[s]);return{isListening:s,transcript:u,error:a,isSupported:f,startListening:x,stopListening:y}},j=({isLoading:s,isProcessingVoice:i,onTranscriptReceived:u})=>{const{isListening:e,transcript:a,isSupported:c,startListening:t,stopListening:l}=v();return m.useEffect(()=>{!e&&a&&u(a)},[a,e,u]),c?d.jsx(k,{variant:e?"destructive":"outline",size:"icon",onClick:e?l:t,disabled:s,className:`h-10 w-10 ${e?"animate-pulse":""}`,"aria-label":e?"Detener dictado":"Iniciar dictado",children:e?d.jsx(w,{className:"h-4 w-4"}):i?d.jsx(S,{className:"h-4 w-4 animate-spin"}):d.jsx(M,{className:"h-4 w-4"})}):null};export{j as default};
